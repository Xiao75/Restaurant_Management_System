@model List<Restaurant.Models.Order>
@{
    ViewData["Title"] = "Admin Dashboard";
}
<div style="padding-top: 60px;">
<h1 class="mb-4 text-success">Sales Detail Report</h1>

<!-- Date Range Filter -->
    <form method="get" class="d-flex align-items-end gap-3 flex-wrap">
        <div class="form-group" style="min-width: 150px;">
            <label for="fromDate" class="form-label">From:</label>
            <input type="date" id="fromDate" name="fromDate" class="form-control form-control-sm"
                   value="@(Context.Request.Query["fromDate"].FirstOrDefault() ?? DateTime.Today.ToString("yyyy-MM-dd"))" />
        </div>

        <div class="form-group" style="min-width: 150px;">
            <label for="toDate" class="form-label">To:</label>
            <input type="date" id="toDate" name="toDate" class="form-control form-control-sm"
                   value="@(Context.Request.Query["toDate"].FirstOrDefault() ?? DateTime.Today.ToString("yyyy-MM-dd"))" />
        </div>

        <button type="submit" class="btn btn-success btn-sm">Filter</button>
    </form>


<!-- Orders Table -->
    <div class="table-responsive" style="margin-top: 25px;">
    <table class="table table-bordered table-hover shadow-sm align-middle">
        <thead class="table-success">
            <tr>
                <th>Invoice</th>
                <th>Customer</th>
                <th>Date</th>
                <th>Items</th>
                <th>Total</th>
                <th>Order Type</th>
            </tr>
        </thead>
        <tbody>
            @if (Model != null && Model.Any())
            {
                foreach (var order in Model)
                {
                    <tr>
                        <td>@order.InvoiceId</td>
                        <td>@order.Customer?.Name</td>
                        <td>@order.OrderDate.ToString("dd MMM yyyy hh:mm tt")</td>
                            <td>
                                <ul class="mb-0">
                                    @foreach (var item in order.OrderItems)
                                    {
                                        <li>
                                            @item.Item?.Name = @item.Quantity x @string.Format("{0:C}", item.Item?.Price)
                                        </li>
                                    }
                                </ul>
                            </td>
                        <td>@string.Format("{0:C}", order.TotalAmount)</td>
                        <td>@order.Source</td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="6" class="text-center text-muted">No orders found for this date range.</td>
                </tr>
            }
        </tbody>
    </table>
</div>
