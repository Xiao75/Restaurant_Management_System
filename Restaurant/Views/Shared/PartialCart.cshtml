@model List<Restaurant.Models.ViewModels.CartItemViewModel>
@using System.Globalization

@if (Model != null && Model.Any())
{
    <div class="card border p-3 shadow-sm">
        <h4>Your Cart</h4>
        <ul class="list-group">
            @foreach (var item in Model)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>@($"{item.Name} (x{item.Quantity})")</strong>
                        <div class="btn-group btn-group-sm ms-2" role="group">
                            <form asp-action="DecreaseQuantity" method="post" class="d-inline">
                                <input type="hidden" name="itemId" value="@item.ItemId" />
                                <button type="submit" class="btn btn-warning btn-sm">-</button>
                            </form>
                            <form asp-action="IncreaseQuantity" method="post" class="d-inline">
                                <input type="hidden" name="itemId" value="@item.ItemId" />
                                <button type="submit" class="btn btn-success btn-sm">+</button>
                            </form>
                            <form asp-action="RemoveItem" method="post" class="d-inline">
                                <input type="hidden" name="itemId" value="@item.ItemId" />
                                <button type="submit" class="btn btn-danger btn-sm">x</button>
                            </form>
                        </div>
                    </div>
                    <span>
                        @{
                            var totalPrice = item.Price * item.Quantity;
                            @totalPrice.ToString("C", CultureInfo.GetCultureInfo("en-IN"))
                        }
                    </span>
                </li>
            }
        </ul>

        <div class="mt-2 text-end fw-bold">
            @{
                var subtotal = Model.Sum(i => i.Price * i.Quantity);
                <text>subtotal: @subtotal.ToString("C", CultureInfo.GetCultureInfo("en-IN"))</text>
            }
        </div>
            <a asp-controller="Order" asp-action="ViewCart" class="btn btn-primary w-100">Go to Checkout</a>
    </div>
}
else
{
    <div class="alert alert-info">Your cart is empty.</div>
}
